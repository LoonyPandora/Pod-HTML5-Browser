<html><head><title>Dancer::Route::Cache</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.22,
  using Pod::Simple::PullParser v3.22,
  under Perl v5.014001 at Sun Jun 24 19:07:14 2012 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#METHODS%2FSUBROUTINES'>METHODS/SUBROUTINES</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new(%40args)'>new(@args)</a>
    <li class='indexItem indexItem2'><a href='#route_from_path(%24path)'>route_from_path($path)</a>
    <li class='indexItem indexItem2'><a href='#store_path(_%24method%2C_%24path_%3D%3E_%24route_)'>store_path( $method, $path =&#62; $route )</a>
    <li class='indexItem indexItem2'><a href='#parse_size(%24size)'>parse_size($size)</a>
    <li class='indexItem indexItem2'><a href='#route_cache_size'>route_cache_size</a>
    <li class='indexItem indexItem2'><a href='#route_cache_paths'>route_cache_paths</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#ATTRIBUTES'>ATTRIBUTES</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#size_limit(%24limit)'>size_limit($limit)</a>
    <li class='indexItem indexItem2'><a href='#path_limit(%24limit)'>path_limit($limit)</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#LICENSE_AND_COPYRIGHT'>LICENSE AND COPYRIGHT</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Dancer::Route::Cache - route caching mechanism for <a href="../../../Dancer.html" class="podlinkpod"
>Dancer</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    my $cache = Dancer::Route::Cache-&#62;new(
        path_limit =&#62; 300, # optional
    );

    # storing a path
    # /new/item/ is the path, $route is a compiled route
    $cache-&#62;store_path( &#39;get&#39;, &#39;/new/item/&#39;, $route );
    my $cached_route = $cache-&#62;route_from_path(&#39;/new/item/&#39;);</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>When <a href="../../../Dancer.html" class="podlinkpod"
>Dancer</a> first starts, it has to compile a regexp list of all the routes. Then, on each request it goes over the compiled routes list and tries to compare the requested path to a route.</p>

<p>A major drawback is that <a href="../../../Dancer.html" class="podlinkpod"
>Dancer</a> has to go over the matching on every request, which (especially on CGI-based applications) can be very time consuming.</p>

<p>The caching mechanism allows one to cache some requests to specific routes (but <b>NOT</b> specific results) and run those routes on a specific path. This allows us to speed up <a href="../../../Dancer.html" class="podlinkpod"
>Dancer</a> quite a lot.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS/SUBROUTINES"
>METHODS/SUBROUTINES</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new(@args)"
>new(@args)</a></h2>

<p>Creates a new route cache object.</p>

<pre>    my $cache = Dancer::Route::Cache-&#62;new(
        path_limit =&#62; 100,   # only 100 paths will be cached
        size_limit =&#62; &#39;30M&#39;, # max size for cache is 30MB
    );</pre>

<p>Please check the <code>ATTRIBUTES</code> section below to learn about the arguments for <code>new()</code>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="route_from_path($path)"
>route_from_path($path)</a></h2>

<p>Fetches the route from the path in the cache.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="store_path(_$method,_$path_=&#62;_$route_)"
>store_path( $method, $path =&#62; $route )</a></h2>

<p>Stores the route in the cache according to the path and $method.</p>

<p>For developers: the reason we&#39;re using an object for this and not directly using the registry hash is because we need to enforce the limits.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="parse_size($size)"
>parse_size($size)</a></h2>

<p>Parses the size wanted to bytes. It can handle Kilobytes, Megabytes or Gigabytes.</p>

<p><b>NOTICE:</b> handles bytes, not bits!</p>

<pre>    my $bytes = $cache-&#62;parse_size(&#39;30M&#39;);

    # doesn&#39;t need an existing object
    $bytes = Dancer::Route::Cache-&#62;parse_size(&#39;300G&#39;); # works this way too</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="route_cache_size"
>route_cache_size</a></h2>

<p>Returns a rough calculation the size of the cache. This is used to enforce the size limit.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="route_cache_paths"
>route_cache_paths</a></h2>

<p>Returns all the paths in the cache. This is used to enforce the path limit.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="ATTRIBUTES"
>ATTRIBUTES</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="size_limit($limit)"
>size_limit($limit)</a></h2>

<p>Allows one to set a size limit of the cache.</p>

<p>Returns the limit (post-set).</p>

<pre>    $cache-&#62;size_limit(&#39;10K&#39;);      # sets limit
    my $limit = $cache-&#62;size_limit; # gets limit</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="path_limit($limit)"
>path_limit($limit)</a></h2>

<p>A path limit. That is, the amount of paths that whose routes will be cached.</p>

<p>Returns the limit (post-set).</p>

<pre>    $cache-&#62;path_limit(&#39;100&#39;);      # sets limit
    my $limit = $cache-&#62;path_limit; # gets limit</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Sawyer X</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="LICENSE_AND_COPYRIGHT"
>LICENSE AND COPYRIGHT</a></h1>

<p>Copyright 2010 Sawyer X.</p>

<p>This program is free software; you can redistribute it and/or modify it under the terms of either: the GNU General Public License as published by the Free Software Foundation; or the Artistic License.</p>

<p>See http://dev.perl.org/licenses/ for more information.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
