<html><head><title>Dancer::Exception</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.22,
  using Pod::Simple::PullParser v3.22,
  under Perl v5.014001 at Sun Jun 24 19:07:14 2012 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#What_it_means_for_Dancer_users'>What it means for Dancer users</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#try'>try</a>
    <li class='indexItem indexItem2'><a href='#catch'>catch</a>
    <li class='indexItem indexItem2'><a href='#continuation'>continuation</a>
    <li class='indexItem indexItem2'><a href='#raise'>raise</a>
    <li class='indexItem indexItem2'><a href='#register_exception'>register_exception</a>
    <li class='indexItem indexItem2'><a href='#registered_exceptions'>registered_exceptions</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#GLOBAL_VARIABLE'>GLOBAL VARIABLE</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#%24Dancer%3A%3AException%3A%3AVerbose'>$Dancer::Exception::Verbose</a>
  </ul>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Dancer::Exception - class for throwing and catching exceptions</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use Dancer::Exception qw(:all);

    register_exception(&#39;DataProblem&#39;,
                        message_pattern =&#62; &#34;test message : %s&#34;
                      );

    sub do_stuff {
      raise DataProblem =&#62; &#34;we&#39;ve lost data!&#34;;
    }

    try {
      do_stuff()
    } catch {
      # an exception was thrown
      my ($exception) = @_;
      if ($exception-&#62;does(&#39;DataProblem&#39;)) {
        # handle the data problem
        my $message = $exception-&#62;message();
      } else {
        $exception-&#62;rethrow
      }
    };</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>Dancer::Exception is based on <a href="../../Try/Tiny.html" class="podlinkpod"
>Try::Tiny</a>. You can try and catch exceptions, like in <a href="../../Try/Tiny.html" class="podlinkpod"
>Try::Tiny</a>.</p>

<p>Exceptions are objects, from subclasses of <a href="../../Dancer/Exception/Base.html" class="podlinkpod"
>Dancer::Exception::Base</a>.</p>

<p>However, for internal Dancer usage, we introduce a special class of exceptions, called <a href="../../Dancer/Continuation.html" class="podlinkpod"
>Dancer::Continuation</a>. Exceptions that are from this class are not caught with a <code>catch</code> block, but only with a <code>continuation</code>. That&#39;s a cheap way to implement a <i>workflow interruption</i>. Dancer users should ignore this feature.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="What_it_means_for_Dancer_users"
>What it means for Dancer users</a></h2>

<p>Users can throw and catch exceptions, using <code>try</code> and <code>catch</code>. They can reuse some Dancer core exceptions (<code>Dancer::Exception::Base::*</code>), but they can also create new exception classes, and use them for their own means. That way it&#39;s easy to use custom exceptions in a Dancer application. Have a look at <code>register_exception</code>, <code>raise</code>, and the methods in <a href="../../Dancer/Exception/Base.html" class="podlinkpod"
>Dancer::Exception::Base</a>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="try"
>try</a></h2>

<p>Same as in <a href="../../Try/Tiny.html" class="podlinkpod"
>Try::Tiny</a></p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="catch"
>catch</a></h2>

<p>Same as in <a href="../../Try/Tiny.html" class="podlinkpod"
>Try::Tiny</a>. The exception can be retrieved as the first parameter:</p>

<pre>    try { ... } catch { my ($exception) = @_; };</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="continuation"
>continuation</a></h2>

<p>To be used by Dancer developers only, in Dancer core code.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="raise"
>raise</a></h2>

<pre>  # raise Dancer::Exception::Base::Custom
  raise Custom =&#62; &#34;user $username is unknown&#34;;

  # raise Dancer::Exception::Base::Custom::Frontend
  raise &#39;Custom::Frontend&#39; =&#62; &#34;user $username is unknown&#34;;

  # same, raise Dancer::Exception::Base::Custom::Frontend
  raise custom_frontend =&#62; &#34;user $username is unknown&#34;;

  # raise My::Own::ExceptionSystem::Invalid::Login
  raise &#39;+My::Own::ExceptionSystem::Invalid::Login&#39; =&#62; &#34;user $username is unknown&#34;;</pre>

<p>raise provides an easy way to throw an exception. First parameter is the name of the exception class, without the <code>Dancer::Exception::</code> prefix. other parameters are stored as <i>raising arguments</i> in the exception. Usually the parameters is an exception message, but it&#39;s left to the exception class implementation.</p>

<p>If the exception class name starts with a <code>+</code>, then the <code>Dancer::Exception::</code> won&#39;t be added. This allows one to build their own exception class hierarchy, but you should first look at <code>register_exception</code> before implementing your own class hierarchy. If you really wish to build your own exception class hierarchy, we recommend that all exceptions inherit of <a href="../../Dancer/Exception.html" class="podlinkpod"
>Dancer::Exception::</a>. Or at least it should implement its methods.</p>

<p>The exception class can also be written as words separated by underscores, it&#39;ll be camelized automatically. So <code>&#39;Exception::Foo&#39;</code> and <code>&#39;exception_foo&#39;</code> are equivalent. Be careful, <code>&#39;MyException&#39;</code> can&#39;t be written <code>&#39;myexception&#39;</code>, as it would be camelized into <code>&#39;Myexception&#39;</code>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="register_exception"
>register_exception</a></h2>

<p>This method allows one to register custom exceptions, usable by Dancer users in their route code (actually pretty much everywhere).</p>

<pre>  # simple exception
  register_exception (&#39;InvalidCredentials&#39;,
                      message_pattern =&#62; &#34;invalid credentials : %s&#34;,
                     );</pre>

<p>This registers a new custom exception. To use it, do:</p>

<pre>  raise InvalidCredentials =&#62; &#34;user Herbert not found&#34;;</pre>

<p>The exception message can be retrieved with the <code>$exception-</code>message&#62; method, and we&#39;ll be <code>&#34;invalid credentials : user Herbert not found&#34;</code> (see methods in <a href="../../Dancer/Exception/Base.html" class="podlinkpod"
>Dancer::Exception::Base</a>)</p>

<pre>  # complex exception
  register_exception (&#39;InvalidLogin&#39;,
                      composed_from =&#62; [qw(Fatal InvalidCredentials)],
                      message_pattern =&#62; &#34;wrong login or password&#34;,
                   );</pre>

<p>In this example, the <code>InvalidLogin</code> is built as a composition of the <code>Fatal</code> and <code>InvalidCredentials</code> exceptions. See the <code>does</code> method in <a href="../../Dancer/Exception/Base.html" class="podlinkpod"
>Dancer::Exception::Base</a>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="registered_exceptions"
>registered_exceptions</a></h2>

<pre>  my @exception_classes = registered_exceptions;</pre>

<p>Returns the list of exception class names. It will list core exceptions <code>and</code> custom exceptions (except the one you&#39;ve registered with a leading <code>+</code>, see <code>register_exception</code>). The list is sorted.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="GLOBAL_VARIABLE"
>GLOBAL VARIABLE</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$Dancer::Exception::Verbose"
>$Dancer::Exception::Verbose</a></h2>

<p>When set to 1, exceptions will stringify with a long stack trace. This variable is similar to <code>$Carp::Verbose</code>. I recommend you use it like that:</p>

<pre>  local $Dancer::Exception::Verbose;
  $Dancer::Exception::Verbose = 1;</pre>

<p>All the <a href="../../Carp.html" class="podlinkpod"
>Carp</a> global variables can also be used to alter the stacktrace generation.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
